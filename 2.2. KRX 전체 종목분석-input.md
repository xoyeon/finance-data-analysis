[![Open In Colab](https://colab.research.google.com/assets/colab-badge.svg)](https://colab.research.google.com/github/corazzon/finance-data-analysis/blob/main/2.2.%20KRX%20%EC%A0%84%EC%B2%B4%20%EC%A2%85%EB%AA%A9%EB%B6%84%EC%84%9D-input.ipynb)

## 한국거래소(KRX) 전체 종목 분석
* Pandas cheat sheet 를 함께 보세요! : [Pandas_Cheat_Sheet.pdf](https://pandas.pydata.org/Pandas_Cheat_Sheet.pdf)

* FinanceDataReader를 통한 KRX 전체 종목 수집
    * to_csv("파일명", index=False) : csv 파일로 저장하기
    * read_csv("파일명") : csv 파일 불러오기
    
* Pandas를 통한 파일 저장과 불러오기
    * shape를 통한 행과 열의 수 보기
    * head, tail, sample 을 통한 일부 데이터 가져오기
    
* DataFrame의 info(), describe() 등을 통한 요약과 기술통계 값 구하기
    * info()
    * describe()
    * nunique()
    * index
    * columns
    * values
    
* Pandas의  DataFrame과 Series의 이해
    * Series : 1차원 벡터구조
    * DataFrame : 2차원 행렬구조
    
* 색인하기
    * [컬럼]
    * .loc[행]
    * .loc[행, 열]
    * .loc[조건식, 열]
    
* DataFrame의 데이터 타입 이해하기
    * 날짜 데이터의 변환
    
* DataFrame 다루기
    * 열(column) 인덱싱
    * 행(index) 인덱싱
    * 행, 열 인덱싱
    * 정렬하기 : sort_values 사용하기
    * 조건식 사용하기

* 빈도수 구하기
    * 한 개의 변수 : series.value_counts()
    * 두 개의 변수 : pd.crosstab()

* groupby 와 pivot_table
    * 다양한 연산식의 사용


## ⚠️ 주의할 점 ⚠️ 
* 강좌의 분석내용과 여러분의 실습 결과는 시점의 차이로 빈도수 등의 결과값이 다르게 나옵니다.



## 라이브러리 불러오기


```python
# 데이터 분석을 위해 pandas, 시각화를 위해 seaborn 불러오기
import pandas as pd
import seaborn as sns
import numpy as np
```

## FinanceDataReader 로 수집한 전체 종목 불러오기

* 한국 주식 가격, 미국주식 가격, 지수, 환율, 암호화폐 가격, 종목 리스팅 등 금융 데이터 수집 라이브러리
* [FinanceData/FinanceDataReader: Financial data reader](https://github.com/FinanceData/FinanceDataReader)
* [FinanceDataReader 사용자 안내서 | FinanceData](https://financedata.github.io/posts/finance-data-reader-users-guide.html)
* https://pandas-datareader.readthedocs.io/en/latest/readers/index.html


```python
# 이전 강좌에서 to_csv로 저장해둔 krx.csv 파일을 pd.read_csv 로 불러옵니다.
df = pd.read_csv("krx.csv")
```

### 일부 데이터만 가져오기

{'회사명':'Name', '종목코드':'Symbol', '업종':'Sector', '주요제품':'Industry', 
                            '상장일':'ListingDate', '결산월':'SettleMonth',  '대표자명':'Representative', 
                            '홈페이지':'HomePage', '지역':'Region', }


```python
# head 로 위에 있는 데이터 일부만 가져옵니다.
df.head()
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Symbol</th>
      <th>Market</th>
      <th>Name</th>
      <th>Sector</th>
      <th>Industry</th>
      <th>ListingDate</th>
      <th>SettleMonth</th>
      <th>Representative</th>
      <th>HomePage</th>
      <th>Region</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>060310</td>
      <td>KOSDAQ</td>
      <td>3S</td>
      <td>특수 목적용 기계 제조업</td>
      <td>반도체 웨이퍼 캐리어</td>
      <td>2002-04-23</td>
      <td>03월</td>
      <td>박종익, 김세완 (각자 대표이사)</td>
      <td>http://www.3sref.com</td>
      <td>서울특별시</td>
    </tr>
    <tr>
      <th>1</th>
      <td>095570</td>
      <td>KOSPI</td>
      <td>AJ네트웍스</td>
      <td>산업용 기계 및 장비 임대업</td>
      <td>렌탈(파렛트, OA장비, 건설장비)</td>
      <td>2015-08-21</td>
      <td>12월</td>
      <td>박대현</td>
      <td>http://www.ajnet.co.kr</td>
      <td>서울특별시</td>
    </tr>
    <tr>
      <th>2</th>
      <td>006840</td>
      <td>KOSPI</td>
      <td>AK홀딩스</td>
      <td>기타 금융업</td>
      <td>지주사업</td>
      <td>1999-08-11</td>
      <td>12월</td>
      <td>채형석, 이석주(각자 대표이사)</td>
      <td>http://www.aekyunggroup.co.kr</td>
      <td>서울특별시</td>
    </tr>
    <tr>
      <th>3</th>
      <td>054620</td>
      <td>KOSDAQ</td>
      <td>APS홀딩스</td>
      <td>기타 금융업</td>
      <td>인터넷 트래픽 솔루션</td>
      <td>2001-12-04</td>
      <td>12월</td>
      <td>정기로</td>
      <td>http://www.apsholdings.co.kr</td>
      <td>경기도</td>
    </tr>
    <tr>
      <th>4</th>
      <td>265520</td>
      <td>KOSDAQ</td>
      <td>AP시스템</td>
      <td>특수 목적용 기계 제조업</td>
      <td>디스플레이 제조 장비</td>
      <td>2017-04-07</td>
      <td>12월</td>
      <td>김영주</td>
      <td>http://www.apsystems.co.kr</td>
      <td>경기도</td>
    </tr>
  </tbody>
</table>
</div>




```python
# tail 로 아래 있는 데이터 일부만 가져옵니다.
df.tail()
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Symbol</th>
      <th>Market</th>
      <th>Name</th>
      <th>Sector</th>
      <th>Industry</th>
      <th>ListingDate</th>
      <th>SettleMonth</th>
      <th>Representative</th>
      <th>HomePage</th>
      <th>Region</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>7135</th>
      <td>000547</td>
      <td>KOSPI</td>
      <td>흥국화재2우B</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>7136</th>
      <td>000545</td>
      <td>KOSPI</td>
      <td>흥국화재우</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>7137</th>
      <td>003280</td>
      <td>KOSPI</td>
      <td>흥아해운</td>
      <td>해상 운송업</td>
      <td>외항화물운송업(케미컬탱커)</td>
      <td>1976-06-29</td>
      <td>12월</td>
      <td>이환구</td>
      <td>http://www.heung-a.com</td>
      <td>서울특별시</td>
    </tr>
    <tr>
      <th>7138</th>
      <td>037440</td>
      <td>KOSDAQ</td>
      <td>희림</td>
      <td>건축기술, 엔지니어링 및 관련 기술 서비스업</td>
      <td>설계 및 감리용역</td>
      <td>2000-02-03</td>
      <td>12월</td>
      <td>정영균, 이목운, 허철호 (각자대표)</td>
      <td>http://www.heerim.com</td>
      <td>서울특별시</td>
    </tr>
    <tr>
      <th>7139</th>
      <td>238490</td>
      <td>KOSDAQ</td>
      <td>힘스</td>
      <td>특수 목적용 기계 제조업</td>
      <td>OLED Mask 인장기, OLED Mask 검사기 등</td>
      <td>2017-07-20</td>
      <td>12월</td>
      <td>김주환</td>
      <td>http://www.hims.co.kr</td>
      <td>인천광역시</td>
    </tr>
  </tbody>
</table>
</div>




```python
# sample을 사용하면 랜덤하게 ()안의 갯수만큼 가져옵니다. 
# ()안에 값을 써주지 않으면 한 개만 가져옵니다.
df.sample(5)
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Symbol</th>
      <th>Market</th>
      <th>Name</th>
      <th>Sector</th>
      <th>Industry</th>
      <th>ListingDate</th>
      <th>SettleMonth</th>
      <th>Representative</th>
      <th>HomePage</th>
      <th>Region</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>1721</th>
      <td>55G766</td>
      <td>KOSPI</td>
      <td>NHG766삼성전자풋</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>4981</th>
      <td>115180</td>
      <td>KOSDAQ</td>
      <td>큐리언트</td>
      <td>자연과학 및 공학 연구개발업</td>
      <td>저분자 혁신신약</td>
      <td>2016-02-29</td>
      <td>12월</td>
      <td>남기연</td>
      <td>http://www.qurient.com</td>
      <td>경기도</td>
    </tr>
    <tr>
      <th>3531</th>
      <td>520010</td>
      <td>KOSPI</td>
      <td>미래에셋 원유선물혼합 ETN(H)</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>4457</th>
      <td>046940</td>
      <td>KOSDAQ</td>
      <td>우원개발</td>
      <td>기반조성 및 시설물 축조관련 전문공사업</td>
      <td>토공사</td>
      <td>2002-06-18</td>
      <td>12월</td>
      <td>김기영</td>
      <td>http://www.woowonerd.com</td>
      <td>서울특별시</td>
    </tr>
    <tr>
      <th>239</th>
      <td>58G336</td>
      <td>KOSPI</td>
      <td>KBG336KOSPI200콜</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
  </tbody>
</table>
</div>



## 데이터 요약하기


```python
# info 로 요약 데이터를 봅니다.
df.info()
```

    <class 'pandas.core.frame.DataFrame'>
    RangeIndex: 7140 entries, 0 to 7139
    Data columns (total 10 columns):
     #   Column          Non-Null Count  Dtype 
    ---  ------          --------------  ----- 
     0   Symbol          7140 non-null   object
     1   Market          7140 non-null   object
     2   Name            7140 non-null   object
     3   Sector          2450 non-null   object
     4   Industry        2431 non-null   object
     5   ListingDate     2450 non-null   object
     6   SettleMonth     2450 non-null   object
     7   Representative  2450 non-null   object
     8   HomePage        2270 non-null   object
     9   Region          2450 non-null   object
    dtypes: object(10)
    memory usage: 557.9+ KB
    


```python
# describe 로 기술통계값을 봅니다.
df.describe()
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Symbol</th>
      <th>Market</th>
      <th>Name</th>
      <th>Sector</th>
      <th>Industry</th>
      <th>ListingDate</th>
      <th>SettleMonth</th>
      <th>Representative</th>
      <th>HomePage</th>
      <th>Region</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>count</th>
      <td>7140</td>
      <td>7140</td>
      <td>7140</td>
      <td>2450</td>
      <td>2431</td>
      <td>2450</td>
      <td>2450</td>
      <td>2450</td>
      <td>2270</td>
      <td>2450</td>
    </tr>
    <tr>
      <th>unique</th>
      <td>7140</td>
      <td>3</td>
      <td>7140</td>
      <td>160</td>
      <td>2274</td>
      <td>1808</td>
      <td>9</td>
      <td>2328</td>
      <td>2249</td>
      <td>22</td>
    </tr>
    <tr>
      <th>top</th>
      <td>005500</td>
      <td>KOSPI</td>
      <td>동양철관</td>
      <td>특수 목적용 기계 제조업</td>
      <td>기업인수합병</td>
      <td>1996-07-03</td>
      <td>12월</td>
      <td>-</td>
      <td>http://www.dygroup.co.kr</td>
      <td>서울특별시</td>
    </tr>
    <tr>
      <th>freq</th>
      <td>1</td>
      <td>5475</td>
      <td>1</td>
      <td>143</td>
      <td>38</td>
      <td>8</td>
      <td>2390</td>
      <td>5</td>
      <td>2</td>
      <td>991</td>
    </tr>
  </tbody>
</table>
</div>




```python
# 중복을 제외한 unique 값의 갯수를 봅니다.
df.nunique
# df.describe().loc["unique"]
```




    Symbol            7140
    Market               3
    Name              7140
    Sector             160
    Industry          2274
    ListingDate       1808
    SettleMonth          9
    Representative    2328
    HomePage          2249
    Region              22
    dtype: int64




```python

```


```python
# index 값 보기
df.index
```




    RangeIndex(start=0, stop=7140, step=1)




```python
# 컬럼값 보기
df.columns
```




    Index(['Symbol', 'Market', 'Name', 'Sector', 'Industry', 'ListingDate',
           'SettleMonth', 'Representative', 'HomePage', 'Region'],
          dtype='object')




```python
# 값만 보기
df.values
```




    array([['060310', 'KOSDAQ', '3S', ..., '박종익, 김세완 (각자 대표이사)',
            'http://www.3sref.com', '서울특별시'],
           ['095570', 'KOSPI', 'AJ네트웍스', ..., '박대현',
            'http://www.ajnet.co.kr', '서울특별시'],
           ['006840', 'KOSPI', 'AK홀딩스', ..., '채형석, 이석주(각자 대표이사)',
            'http://www.aekyunggroup.co.kr', '서울특별시'],
           ...,
           ['003280', 'KOSPI', '흥아해운', ..., '이환구', 'http://www.heung-a.com',
            '서울특별시'],
           ['037440', 'KOSDAQ', '희림', ..., '정영균, 이목운, 허철호 (각자대표)',
            'http://www.heerim.com', '서울특별시'],
           ['238490', 'KOSDAQ', '힘스', ..., '김주환', 'http://www.hims.co.kr',
            '인천광역시']], dtype=object)



## 데이터 색인하기

### Series
<img src="https://pandas.pydata.org/docs/_images/01_table_series.svg">


```python
# Name 컬럼 하나만 가져옵니다.
df['Name']  # Series 형태
```




    0            3S
    1        AJ네트웍스
    2         AK홀딩스
    3        APS홀딩스
    4         AP시스템
             ...   
    7135    흥국화재2우B
    7136      흥국화재우
    7137       흥아해운
    7138         희림
    7139         힘스
    Name: Name, Length: 7140, dtype: object




```python
# df["Name"] 의 type을 봅니다.
type(df['Name'])
```




    pandas.core.series.Series




```python
type(df)
```




    pandas.core.frame.DataFrame




```python
# 0번째 행만 가져옵니다. 행인덱스를 가져올때는 .loc를 사용합니다.
# loc는 위치(locate)를 의미합니다.
df.loc[1]
```




    Symbol                            095570
    Market                             KOSPI
    Name                              AJ네트웍스
    Sector                   산업용 기계 및 장비 임대업
    Industry             렌탈(파렛트, OA장비, 건설장비)
    ListingDate                   2015-08-21
    SettleMonth                          12월
    Representative                       박대현
    HomePage          http://www.ajnet.co.kr
    Region                             서울특별시
    Name: 1, dtype: object




```python
# df.loc[0] 의 type을 봅니다.
type(df.loc[0])
```




    pandas.core.series.Series



### DataFrame
<img src="https://pandas.pydata.org/docs/_images/01_table_dataframe.svg">


```python
# df 변수의 타입을 봅니다.
df.dtypes
```




    Symbol            object
    Market            object
    Name              object
    Sector            object
    Industry          object
    ListingDate       object
    SettleMonth       object
    Representative    object
    HomePage          object
    Region            object
    dtype: object




```python
# 여러 컬럼을 지정할 때는 리스트 형태로 묶어주어야 합니다. 
# 2차원 행렬은 대괄호가 [] 2개가 있다는 것을 기억해 주세요. -> DataFrame 형태로 반환
df[['Name','Symbol']]
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Name</th>
      <th>Symbol</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>3S</td>
      <td>060310</td>
    </tr>
    <tr>
      <th>1</th>
      <td>AJ네트웍스</td>
      <td>095570</td>
    </tr>
    <tr>
      <th>2</th>
      <td>AK홀딩스</td>
      <td>006840</td>
    </tr>
    <tr>
      <th>3</th>
      <td>APS홀딩스</td>
      <td>054620</td>
    </tr>
    <tr>
      <th>4</th>
      <td>AP시스템</td>
      <td>265520</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>7135</th>
      <td>흥국화재2우B</td>
      <td>000547</td>
    </tr>
    <tr>
      <th>7136</th>
      <td>흥국화재우</td>
      <td>000545</td>
    </tr>
    <tr>
      <th>7137</th>
      <td>흥아해운</td>
      <td>003280</td>
    </tr>
    <tr>
      <th>7138</th>
      <td>희림</td>
      <td>037440</td>
    </tr>
    <tr>
      <th>7139</th>
      <td>힘스</td>
      <td>238490</td>
    </tr>
  </tbody>
</table>
<p>7140 rows × 2 columns</p>
</div>




```python
# 여러 개의 행을 가져올 때도 [] 대괄호를 통해 리스트 형태로 묶어줍니다.
df.loc[[0, 1, 2]]
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Symbol</th>
      <th>Market</th>
      <th>Name</th>
      <th>Sector</th>
      <th>Industry</th>
      <th>ListingDate</th>
      <th>SettleMonth</th>
      <th>Representative</th>
      <th>HomePage</th>
      <th>Region</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>060310</td>
      <td>KOSDAQ</td>
      <td>3S</td>
      <td>특수 목적용 기계 제조업</td>
      <td>반도체 웨이퍼 캐리어</td>
      <td>2002-04-23</td>
      <td>03월</td>
      <td>박종익, 김세완 (각자 대표이사)</td>
      <td>http://www.3sref.com</td>
      <td>서울특별시</td>
    </tr>
    <tr>
      <th>1</th>
      <td>095570</td>
      <td>KOSPI</td>
      <td>AJ네트웍스</td>
      <td>산업용 기계 및 장비 임대업</td>
      <td>렌탈(파렛트, OA장비, 건설장비)</td>
      <td>2015-08-21</td>
      <td>12월</td>
      <td>박대현</td>
      <td>http://www.ajnet.co.kr</td>
      <td>서울특별시</td>
    </tr>
    <tr>
      <th>2</th>
      <td>006840</td>
      <td>KOSPI</td>
      <td>AK홀딩스</td>
      <td>기타 금융업</td>
      <td>지주사업</td>
      <td>1999-08-11</td>
      <td>12월</td>
      <td>채형석, 이석주(각자 대표이사)</td>
      <td>http://www.aekyunggroup.co.kr</td>
      <td>서울특별시</td>
    </tr>
  </tbody>
</table>
</div>




```python
# 1개의 컬럼을 가져올 때도 대괄호[] 2개를 써서 리스트 형태로 묶어주게 되면 데이터프레임 형태로 반환됩니다.
# "Name" 을 데이터프레임으로 가져옵니다.
df[['Name']]
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Name</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>3S</td>
    </tr>
    <tr>
      <th>1</th>
      <td>AJ네트웍스</td>
    </tr>
    <tr>
      <th>2</th>
      <td>AK홀딩스</td>
    </tr>
    <tr>
      <th>3</th>
      <td>APS홀딩스</td>
    </tr>
    <tr>
      <th>4</th>
      <td>AP시스템</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
    </tr>
    <tr>
      <th>7135</th>
      <td>흥국화재2우B</td>
    </tr>
    <tr>
      <th>7136</th>
      <td>흥국화재우</td>
    </tr>
    <tr>
      <th>7137</th>
      <td>흥아해운</td>
    </tr>
    <tr>
      <th>7138</th>
      <td>희림</td>
    </tr>
    <tr>
      <th>7139</th>
      <td>힘스</td>
    </tr>
  </tbody>
</table>
<p>7140 rows × 1 columns</p>
</div>




```python

```

### loc를 통한 서브셋 가져오기
<img src="https://pandas.pydata.org/pandas-docs/stable/_images/03_subset_columns_rows.svg">


```python
# 행과 열 함께 가져오기
# .loc[행, 열]
df.loc[0, "Name"]
```




    '3S'




```python
# .loc[행, 열]
df.loc[0]["Name"]
```




    '3S'




```python
# %timeit
%timeit df.loc[0, "Name"]
```

    18.3 µs ± 1.42 µs per loop (mean ± std. dev. of 7 runs, 10000 loops each)
    


```python
# %timeit
%timeit df.loc[0]["Name"]
```

    171 µs ± 15.3 µs per loop (mean ± std. dev. of 7 runs, 1000 loops each)
    


```python
# 여러 개의 행과 하나의 컬럼 가져오기
# .loc[행, 열]
df.loc[[0, 1, 2], 'Name']
```




    0        3S
    1    AJ네트웍스
    2     AK홀딩스
    Name: Name, dtype: object




```python
# 여러개의 행과 여러 개의 컬럼 가져오기
# .loc[행, 열]
df.loc[[0, 1, 2], ['Name','Symbol']]
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Name</th>
      <th>Symbol</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>3S</td>
      <td>060310</td>
    </tr>
    <tr>
      <th>1</th>
      <td>AJ네트웍스</td>
      <td>095570</td>
    </tr>
    <tr>
      <th>2</th>
      <td>AK홀딩스</td>
      <td>006840</td>
    </tr>
  </tbody>
</table>
</div>



### Boolean Indexing
* 결과값이 True, False bool 형태로 반환되기 때문에 boolean indexing 이라고 부릅니다.
* boolean indexing 을 사용해 특정 조건식을 만족하는 데이터를 서브셋으로 가져옵니다.

<img src="https://pandas.pydata.org/docs/_images/03_subset_rows.svg">


```python
# 카카오를 찾습니다.
df[df['Name'] == "카카오"]
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Symbol</th>
      <th>Market</th>
      <th>Name</th>
      <th>Sector</th>
      <th>Industry</th>
      <th>ListingDate</th>
      <th>SettleMonth</th>
      <th>Representative</th>
      <th>HomePage</th>
      <th>Region</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>4865</th>
      <td>035720</td>
      <td>KOSPI</td>
      <td>카카오</td>
      <td>자료처리, 호스팅, 포털 및 기타 인터넷 정보매개 서비스업</td>
      <td>인터넷 서비스(인터넷 광고)</td>
      <td>2017-07-10</td>
      <td>12월</td>
      <td>여민수, 조수용</td>
      <td>http://www.kakaocorp.com</td>
      <td>제주특별자치도</td>
    </tr>
  </tbody>
</table>
</div>



<img src="https://pandas.pydata.org/pandas-docs/stable/_images/03_subset_columns_rows.svg">


```python
# and => &
# or => |
True and False
```




    False




```python
df['SettleMonth'] == "12월"
```




    0       False
    1        True
    2        True
    3        True
    4        True
            ...  
    7135    False
    7136    False
    7137     True
    7138     True
    7139     True
    Name: SettleMonth, Length: 7140, dtype: bool




```python
# 서울특별시에 소재지를 두고 있는 KOSPI 종목의 종목명과 심볼을 가져옵니다.
# .loc[행, 열]
# .loc[조건식, 열]
# df.loc[(df["Region"] == "서울특별시") & (df["Market"] == "KOSPI"), ["Symbol", "Name"]]

df.loc[(df['Region'] == "서울특별시")  & (df['Market'] == 'KOSPI'), 'Name']
```




    1       AJ네트웍스
    2        AK홀딩스
    46         BGF
    47      BGF리테일
    49         BYC
             ...  
    7122       휴비스
    7124       휴스틸
    7129       휴켐스
    7134      흥국화재
    7137      흥아해운
    Name: Name, Length: 412, dtype: object



## 파생변수 만들기


```python
# pd.to_datetime 을 통해 데이터의 타입을 변환합니다.
df["ListingDate"] = pd.to_datetime(df["ListingDate"])
df["ListingDate"].head(1)
```




    0   2002-04-23
    Name: ListingDate, dtype: datetime64[ns]




```python
# ListingYear 파생변수 만들기
df["ListingYear"] = df["ListingDate"].dt.year
```


```python
# nan은 not a number의 약자로 결측치를 의미합니다.
type(np.nan)
```




    float




```python
df.head(1)
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Symbol</th>
      <th>Market</th>
      <th>Name</th>
      <th>Sector</th>
      <th>Industry</th>
      <th>ListingDate</th>
      <th>SettleMonth</th>
      <th>Representative</th>
      <th>HomePage</th>
      <th>Region</th>
      <th>ListingYear</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>060310</td>
      <td>KOSDAQ</td>
      <td>3S</td>
      <td>특수 목적용 기계 제조업</td>
      <td>반도체 웨이퍼 캐리어</td>
      <td>2002-04-23</td>
      <td>03월</td>
      <td>박종익, 김세완 (각자 대표이사)</td>
      <td>http://www.3sref.com</td>
      <td>서울특별시</td>
      <td>2002.0</td>
    </tr>
  </tbody>
</table>
</div>



## 데이터 시각화 툴 소개

### matplotlib
* [Anatomy of a figure — Matplotlib documentation](https://matplotlib.org/3.1.1/gallery/showcase/anatomy.html)

### seaborn
* [seaborn: statistical data visualization — seaborn documentation](https://seaborn.pydata.org/index.html)

### pandas
* [Visualization — pandas documentation](https://pandas.pydata.org/pandas-docs/stable/user_guide/visualization.html)

## 데이터 시각화를 위한 폰트설정


```python
def get_font_family():
    """
    시스템 환경에 따른 기본 폰트명을 반환하는 함수
    """
    import platform
    system_name = platform.system()
    # colab 사용자는 system_name이 'Linux'로 확인

    if system_name == "Darwin" :
        font_family = "AppleGothic"
    elif system_name == "Windows":
        font_family = "Malgun Gothic"
    else:
        # Linux
        # colab에서는 runtime을 <꼭> 재시작 해야합니다.
        # 런타임을 재시작 하지 않고 폰트 설치를 하면 기본 설정 폰트가 로드되어 한글이 깨집니다.
        !apt-get update -qq
        !apt-get install fonts-nanum -qq  > /dev/null

        import matplotlib.font_manager as fm

        fontpath = '/usr/share/fonts/truetype/nanum/NanumBarunGothic.ttf'
        font = fm.FontProperties(fname=fontpath, size=9)
        fm._rebuild()
        font_family = "NanumBarunGothic"
    return font_family
```


```python
print(plt.style.available)
```

    ['Solarize_Light2', '_classic_test_patch', 'bmh', 'classic', 'dark_background', 'fast', 'fivethirtyeight', 'ggplot', 'grayscale', 'seaborn', 'seaborn-bright', 'seaborn-colorblind', 'seaborn-dark', 'seaborn-dark-palette', 'seaborn-darkgrid', 'seaborn-deep', 'seaborn-muted', 'seaborn-notebook', 'seaborn-paper', 'seaborn-pastel', 'seaborn-poster', 'seaborn-talk', 'seaborn-ticks', 'seaborn-white', 'seaborn-whitegrid', 'tableau-colorblind10']
    


```python
# 위에서 만든 함수를 통해 시스템 폰트를 불러옵니다.
get_font_family()
```




    'Malgun Gothic'




```python
import matplotlib.pyplot as plt
# 시각화를 위한 폰트설정
# 위에서 만든 함수를 통해 시스템 폰트를 불러와서 font_family 라는 변수에 할당합니다.

# 폰트설정
plt.rc("font", family=get_font_family())

# 마이너스폰트 설정
plt.rc("axes", unicode_minus=False)

# ggplot으로 그래프 스타일 설정
plt.style.use('ggplot')

# 그래프에 retina display 적용
from IPython.display import set_matplotlib_formats
set_matplotlib_formats('retina')
```

### 폰트 설정 확인하기


```python
# 한글폰트 확인하기
pd.Series([1,3,5,-7,9]).plot(title="한글")
```




    <AxesSubplot:title={'center':'한글'}>




    
![png](output_53_1.png)
    


## 한 개의 변수 빈도수 구하고 시각화 하기
* Keyword

    * Series.value_counts()
    * Series.value_counts().plot()
    * Series.value_counts().plot.bar()
    * Series.value_counts().plot.barh()
    * sns.countplot()

### Market

* KOSPI (Korea Composite Stock Price Index) 
    * 우리나라의 종합주가지수(KOSPI)는 증권거래소가 1964.1.4일을 기준시점으로 다우존스식 주가평균을 지수화한 수정주가 평균지수를 산출, 발표하기 시작하였다. 다우존스식 주가지수는 주가지수를 구성하는 상장종목 중 일부 우량주만을 선정하여 산출하는 방식이다. 시가총액식 주가지수는 일정시점의 시가총액과 현재시점의 시가총액을 대비, 현재의 주가수준을 판단하는 방식이다. 즉, 지난 1980년 1월 4일 기준 상장종목 전체의 시가총액을 100으로 보고 현재 상장종목들의 시가총액이 어느 수준에 놓여 있는지를 보여주는 시스템이다.
    * 종합주가지수 = (비교시점의 시가총액 ÷ 기준시점의 시가총액) × 100
    * 출처 : [네이버 지식백과] 종합주가지수 (시사상식사전, pmg 지식엔진연구소) https://terms.naver.com/entry.nhn?docId=72147&cid=43667&categoryId=43667


* KOSDAQ (Korea Securities Dealers Automated Quotation) 
    * 미국의 나스닥(NASDAQ)을 한국식으로 합성한 용어로 1996년 7월 1일 증권업협회와 증권사들이 설립한 코스닥증권(주)에 의하여 개설되었다. 코스닥의 개장으로 단순히 증권거래소 상장을 위한 예비적 단계였던 장외시장이 미국의 나스닥(NASDAQ)과 같이 자금조달 및 투자시장으로 독립적인 역할을 수행하게 되었다. 이후 2005년 1월 유가증권시장, 코스닥시장, 선물시장이 증권선물거래소(현 한국거래소)로 통합됨에 따라 코스닥시장도 거래소가 개설한 정규시장으로 편입되었다. 코스닥은 유가증권시장에 비해 진입요건이 상대적으로 덜 까다롭기 때문에 주로 중소벤처기업들이 상장되어 있다.
    * 출처 : [네이버 지식백과] KOSDAQ (매일경제, 매경닷컴) https://terms.naver.com/entry.nhn?docId=18639&cid=43659&categoryId=43659


* KONEX(Korea New Exchange) : 
    * 일정 요건을 갖춘 비상장 기업에 문호를 개방하기 위해 개설하는 유가증권시장, 코스닥시장에 이은 제3의 주식시장을 일컫는다. 코넥스시장은 우수한 기술력을 보유하고 있음에도 불구하고, 짧은 경력 등을 이유로 자금 조달에 어려움을 겪는 초기 중소기업과 벤처기업이 자금을 원활하게 조달할 수 있도록 하기 위해 설립된 자본시장으로, 2013년 7월 1일 개장되었다. 
    * 출처 : [네이버 지식백과] 코넥스 (시사상식사전, pmg 지식엔진연구소) https://terms.naver.com/entry.nhn?docId=1006691&cid=43667&categoryId=43667


```python
# Market column에 어떤 데이터들이 있는지 unique로 확인합니다.
df['Market'].unique()
```




    array(['KOSDAQ', 'KOSPI', 'KONEX'], dtype=object)




```python
# value_counts()로 빈도수를 구합니다.
df['Market'].value_counts()
```




    KOSPI     5475
    KOSDAQ    1528
    KONEX      137
    Name: Market, dtype: int64




```python
# 빈도수를 시각화 합니다.
df['Market'].value_counts().plot.bar(rot=0)   # rot는 글씨 조정, plot(kind='bar')로 나타내도 됨
```




    <AxesSubplot:>




    
![png](output_57_1.png)
    



```python
# Seaborn countplot 활용하여 빈도수를 표현합니다.
sns.countplot(data=df, y='Market')
```




    <AxesSubplot:xlabel='count', ylabel='Market'>




    
![png](output_58_1.png)
    


### Sector


```python
# 섹터의 빈도수를 구합니다.
# 상위 30개 섹터의 빈도수를 sector_count_top 변수에 할당합니다.
# sector_count_top
sector_count_top = df['Sector'].value_counts().head(30)
sector_count_top
```




    특수 목적용 기계 제조업                            143
    소프트웨어 개발 및 공급업                           140
    전자부품 제조업                                 125
    자동차 신품 부품 제조업                             96
    의약품 제조업                                   94
    기타 화학제품 제조업                               93
    기타 금융업                                    92
    금융 지원 서비스업                                75
    통신 및 방송 장비 제조업                            71
    반도체 제조업                                   57
    1차 철강 제조업                                 57
    자연과학 및 공학 연구개발업                           57
    의료용 기기 제조업                                54
    일반 목적용 기계 제조업                             44
    플라스틱제품 제조업                                43
    기초 화학물질 제조업                               42
    기타 전문 도매업                                 39
    기초 의약물질 및 생물학적 제제 제조업                     39
    컴퓨터 프로그래밍, 시스템 통합 및 관리업                   37
    전동기, 발전기 및 전기 변환 · 공급 · 제어 장치 제조업         34
    기타 식품 제조업                                 33
    영화, 비디오물, 방송프로그램 제작 및 배급업                 32
    의료용품 및 기타 의약 관련제품 제조업                     30
    봉제의복 제조업                                  29
    기계장비 및 관련 물품 도매업                          25
    기타 금속 가공제품 제조업                            24
    측정, 시험, 항해, 제어 및 기타 정밀기기 제조업; 광학기기 제외     24
    건물 건설업                                    23
    구조용 금속제품, 탱크 및 증기발생기 제조업                  20
    자료처리, 호스팅, 포털 및 기타 인터넷 정보매개 서비스업          20
    Name: Sector, dtype: int64




```python
# df_sector_30
# sector_count_top.to_frame()
df_sector_30 = sector_count_top.reset_index()
df_sector_30.columns = ['Sector', 'count']
df_sector_30.head(1)
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Sector</th>
      <th>count</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>특수 목적용 기계 제조업</td>
      <td>143</td>
    </tr>
  </tbody>
</table>
</div>




```python
top_30_list = df_sector_30['Sector'].tolist()
```


```python
df_top_30 = df[df['Sector'].isin(top_30_list)]
```


```python
sns.barplot(data=df_sector_30, y='Sector', x='count')
```




    <AxesSubplot:xlabel='count', ylabel='Sector'>




    
![png](output_64_1.png)
    



```python
# Seaborn countplot 활용하여 빈도수를 표현합니다.
sns.countplot(data=df_top_30, y='Sector', order=top_30_list)
```




    <AxesSubplot:xlabel='count', ylabel='Sector'>




    
![png](output_65_1.png)
    



```python
print(plt.colormaps())
```

    ['Accent', 'Accent_r', 'Blues', 'Blues_r', 'BrBG', 'BrBG_r', 'BuGn', 'BuGn_r', 'BuPu', 'BuPu_r', 'CMRmap', 'CMRmap_r', 'Dark2', 'Dark2_r', 'GnBu', 'GnBu_r', 'Greens', 'Greens_r', 'Greys', 'Greys_r', 'OrRd', 'OrRd_r', 'Oranges', 'Oranges_r', 'PRGn', 'PRGn_r', 'Paired', 'Paired_r', 'Pastel1', 'Pastel1_r', 'Pastel2', 'Pastel2_r', 'PiYG', 'PiYG_r', 'PuBu', 'PuBuGn', 'PuBuGn_r', 'PuBu_r', 'PuOr', 'PuOr_r', 'PuRd', 'PuRd_r', 'Purples', 'Purples_r', 'RdBu', 'RdBu_r', 'RdGy', 'RdGy_r', 'RdPu', 'RdPu_r', 'RdYlBu', 'RdYlBu_r', 'RdYlGn', 'RdYlGn_r', 'Reds', 'Reds_r', 'Set1', 'Set1_r', 'Set2', 'Set2_r', 'Set3', 'Set3_r', 'Spectral', 'Spectral_r', 'Wistia', 'Wistia_r', 'YlGn', 'YlGnBu', 'YlGnBu_r', 'YlGn_r', 'YlOrBr', 'YlOrBr_r', 'YlOrRd', 'YlOrRd_r', 'afmhot', 'afmhot_r', 'autumn', 'autumn_r', 'binary', 'binary_r', 'bone', 'bone_r', 'brg', 'brg_r', 'bwr', 'bwr_r', 'cividis', 'cividis_r', 'cool', 'cool_r', 'coolwarm', 'coolwarm_r', 'copper', 'copper_r', 'crest', 'crest_r', 'cubehelix', 'cubehelix_r', 'flag', 'flag_r', 'flare', 'flare_r', 'gist_earth', 'gist_earth_r', 'gist_gray', 'gist_gray_r', 'gist_heat', 'gist_heat_r', 'gist_ncar', 'gist_ncar_r', 'gist_rainbow', 'gist_rainbow_r', 'gist_stern', 'gist_stern_r', 'gist_yarg', 'gist_yarg_r', 'gnuplot', 'gnuplot2', 'gnuplot2_r', 'gnuplot_r', 'gray', 'gray_r', 'hot', 'hot_r', 'hsv', 'hsv_r', 'icefire', 'icefire_r', 'inferno', 'inferno_r', 'jet', 'jet_r', 'magma', 'magma_r', 'mako', 'mako_r', 'nipy_spectral', 'nipy_spectral_r', 'ocean', 'ocean_r', 'pink', 'pink_r', 'plasma', 'plasma_r', 'prism', 'prism_r', 'rainbow', 'rainbow_r', 'rocket', 'rocket_r', 'seismic', 'seismic_r', 'spring', 'spring_r', 'summer', 'summer_r', 'tab10', 'tab10_r', 'tab20', 'tab20_r', 'tab20b', 'tab20b_r', 'tab20c', 'tab20c_r', 'terrain', 'terrain_r', 'turbo', 'turbo_r', 'twilight', 'twilight_r', 'twilight_shifted', 'twilight_shifted_r', 'viridis', 'viridis_r', 'vlag', 'vlag_r', 'winter', 'winter_r']
    


```python
# 빈도수가 가장 많은 데이터 색인하기
```

### Industry


```python
# Industry 의 빈도수를 구합니다.
industry_top30 = df['Industry'].value_counts().head(30)
industry_top30.index
```




    Index(['기업인수합병', '지주회사', '지주사업', '모바일게임', '화장품', '기업 인수 및 합병', '기업인수 및 합병',
           '벤처캐피탈', '금융지원 서비스', '합병', '건강기능식품', '도급공사', '셋톱박스', '금융지원서비스', '의약품',
           '자동차부품', '증권업', '금융지주회사', '-', '부동산투자', '항체치료제', '광고대행', '관이음쇠',
           '기타 금융업', '엔진부품', '골판지원지', 'LED패키지', '투자조합 결성 및 투자', '주정',
           '투자조합, PEF 결성 및 투자'],
          dtype='object')




```python
# Industry 빈도수를 pandas 의 plot 기능을 사용해 시각화 합니다.
industry_top30.sort_values().plot.barh()   # sort_values 내림차순
```




    <AxesSubplot:>




    
![png](output_70_1.png)
    



```python
# df[df["Industry"].isin(industry_top30.index)]
```


```python
df_industry_30 = df[df["Industry"].isin(industry_top30.index)]
df_industry_30.head(2)
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Symbol</th>
      <th>Market</th>
      <th>Name</th>
      <th>Sector</th>
      <th>Industry</th>
      <th>ListingDate</th>
      <th>SettleMonth</th>
      <th>Representative</th>
      <th>HomePage</th>
      <th>Region</th>
      <th>ListingYear</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2</th>
      <td>006840</td>
      <td>KOSPI</td>
      <td>AK홀딩스</td>
      <td>기타 금융업</td>
      <td>지주사업</td>
      <td>1999-08-11</td>
      <td>12월</td>
      <td>채형석, 이석주(각자 대표이사)</td>
      <td>http://www.aekyunggroup.co.kr</td>
      <td>서울특별시</td>
      <td>1999.0</td>
    </tr>
    <tr>
      <th>46</th>
      <td>027410</td>
      <td>KOSPI</td>
      <td>BGF</td>
      <td>기타 금융업</td>
      <td>지주회사</td>
      <td>2014-05-19</td>
      <td>12월</td>
      <td>홍정국</td>
      <td>http://www.bgf.co.kr</td>
      <td>서울특별시</td>
      <td>2014.0</td>
    </tr>
  </tbody>
</table>
</div>




```python
# seaborn
sns.countplot(data=df_industry_30, y='Industry', order=industry_top30.index)
```




    <AxesSubplot:xlabel='count', ylabel='Industry'>




    
![png](output_73_1.png)
    


### Region 


```python
# Region 의 빈도수를 구합니다.
# value_counts()통해 지역별 상장회사의 빈도수를 봅니다.
df['Region'].value_counts()
```




    서울특별시      991
    경기도        687
    충청남도        97
    경상남도        92
    인천광역시       86
    충청북도        82
    부산광역시       77
    경상북도        64
    대구광역시       55
    대전광역시       52
    강원도         27
    전라북도        27
    울산광역시       25
    광주광역시       23
    전라남도        22
    세종특별자치시     10
    제주특별자치도     10
    홍콩           8
    미국           6
    케이맨 제도       5
    일본           3
    싱가포르         1
    Name: Region, dtype: int64




```python
# df["Region"]
df_region_30 = df[df["Region"].isin(region_top30.index)]
```


```python
# Region 의 빈도수를 seaborn 의 countplot 으로 그립니다.
sns.countplot(data=df, y='Region')
```




    <AxesSubplot:xlabel='count', ylabel='Region'>




    
![png](output_77_1.png)
    



```python
# order 기능을 통해 빈도수를 정렬합니다.
# df["Region"].value_counts().index 로 Region 의 순서를 가져와서 지정합니다.
sns.countplot(data=df, y='Region', order=df['Region'].value_counts().index)
# sns.countplot(data=df_region_30, y='Region', order=region_top30.index)
```




    <AxesSubplot:xlabel='count', ylabel='Region'>




    
![png](output_78_1.png)
    



```python
# Region 을 기준으로 정렬합니다. 가나다 순.
sns.countplot(data=df.sort_values("Region"), y='Region')
```




    <AxesSubplot:xlabel='count', ylabel='Region'>




    
![png](output_79_1.png)
    


## 두 개의 변수 빈도수 구하고 시각화 하기
* crosstab 으로 빈도수 구하기
* seaborn의 countplot 으로 빈도수 시각화
* pandas의 plot 기능으로 시각화
    * lineplot : 연속된 데이터(숫자, 기간)
    * barplot : 비연속 데이터(범주형)
    * hist : 연속된 수치 데이터의 범주화

### 지역별 상장 시장 종목 빈도수 구하기
* pd.crosstab 을 통한 2개의 변수에 대한 빈도수 구하기


```python
# pd.crosstab 을 통한 2개의 변수에 대한 빈도수 구하기
# Market 과 Region 으로 빈도수 구하기
df_market_region = pd.crosstab(df['Market'], df['Region'])
df_market_region
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th>Region</th>
      <th>강원도</th>
      <th>경기도</th>
      <th>경상남도</th>
      <th>경상북도</th>
      <th>광주광역시</th>
      <th>대구광역시</th>
      <th>대전광역시</th>
      <th>미국</th>
      <th>부산광역시</th>
      <th>서울특별시</th>
      <th>...</th>
      <th>울산광역시</th>
      <th>인천광역시</th>
      <th>일본</th>
      <th>전라남도</th>
      <th>전라북도</th>
      <th>제주특별자치도</th>
      <th>충청남도</th>
      <th>충청북도</th>
      <th>케이맨 제도</th>
      <th>홍콩</th>
    </tr>
    <tr>
      <th>Market</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>KONEX</th>
      <td>7</td>
      <td>35</td>
      <td>1</td>
      <td>5</td>
      <td>5</td>
      <td>1</td>
      <td>7</td>
      <td>0</td>
      <td>2</td>
      <td>52</td>
      <td>...</td>
      <td>0</td>
      <td>4</td>
      <td>0</td>
      <td>3</td>
      <td>1</td>
      <td>1</td>
      <td>3</td>
      <td>9</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>KOSDAQ</th>
      <td>16</td>
      <td>504</td>
      <td>49</td>
      <td>40</td>
      <td>9</td>
      <td>33</td>
      <td>37</td>
      <td>6</td>
      <td>39</td>
      <td>527</td>
      <td>...</td>
      <td>9</td>
      <td>57</td>
      <td>3</td>
      <td>12</td>
      <td>15</td>
      <td>2</td>
      <td>68</td>
      <td>59</td>
      <td>4</td>
      <td>8</td>
    </tr>
    <tr>
      <th>KOSPI</th>
      <td>4</td>
      <td>148</td>
      <td>42</td>
      <td>19</td>
      <td>9</td>
      <td>21</td>
      <td>8</td>
      <td>0</td>
      <td>36</td>
      <td>412</td>
      <td>...</td>
      <td>16</td>
      <td>25</td>
      <td>0</td>
      <td>7</td>
      <td>11</td>
      <td>7</td>
      <td>26</td>
      <td>14</td>
      <td>1</td>
      <td>0</td>
    </tr>
  </tbody>
</table>
<p>3 rows × 22 columns</p>
</div>




```python
# countplot : Market 과 Region 으로 빈도수 시각화 하기
# T == transpose() == index와 clumn의 위치를 변경해 준다
# df_market_region.transpose().plot.barh(figsize=(12,6))
df_market_region.T.plot.barh(figsize=(12,6))
```




    <AxesSubplot:ylabel='Region'>




    
![png](output_83_1.png)
    


### 연도별 상장 종목 빈도수 분석


```python
# Market, ListingYear 빈도수 구하기
market_year = pd.crosstab(df['Market'], df['ListingYear'])
market_year
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th>ListingYear</th>
      <th>1956.0</th>
      <th>1962.0</th>
      <th>1964.0</th>
      <th>1966.0</th>
      <th>1968.0</th>
      <th>1969.0</th>
      <th>1970.0</th>
      <th>1971.0</th>
      <th>1972.0</th>
      <th>1973.0</th>
      <th>...</th>
      <th>2012.0</th>
      <th>2013.0</th>
      <th>2014.0</th>
      <th>2015.0</th>
      <th>2016.0</th>
      <th>2017.0</th>
      <th>2018.0</th>
      <th>2019.0</th>
      <th>2020.0</th>
      <th>2021.0</th>
    </tr>
    <tr>
      <th>Market</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>KONEX</th>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>...</td>
      <td>0</td>
      <td>12</td>
      <td>13</td>
      <td>26</td>
      <td>25</td>
      <td>18</td>
      <td>14</td>
      <td>15</td>
      <td>12</td>
      <td>2</td>
    </tr>
    <tr>
      <th>KOSDAQ</th>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>...</td>
      <td>19</td>
      <td>35</td>
      <td>59</td>
      <td>90</td>
      <td>63</td>
      <td>68</td>
      <td>87</td>
      <td>97</td>
      <td>86</td>
      <td>50</td>
    </tr>
    <tr>
      <th>KOSPI</th>
      <td>5</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>6</td>
      <td>5</td>
      <td>4</td>
      <td>1</td>
      <td>3</td>
      <td>22</td>
      <td>...</td>
      <td>14</td>
      <td>11</td>
      <td>9</td>
      <td>18</td>
      <td>18</td>
      <td>20</td>
      <td>19</td>
      <td>15</td>
      <td>14</td>
      <td>11</td>
    </tr>
  </tbody>
</table>
<p>3 rows × 57 columns</p>
</div>



### seaborn을 통한 빈도수 시각화


```python
# Seaborn countplot 활용하여 빈도수를 표현합니다.
# hue 를 사용해 다른 변수를 함께 표현합니다. hue는 색상을 의미합니다.
# hue는 카테고리가 적은 걸 사용하는게 좋음
plt.figure(figsize=(30,4))
sns.countplot(data = df, x='ListingYear', hue='Market')
```




    <AxesSubplot:xlabel='ListingYear', ylabel='count'>




    
![png](output_87_1.png)
    


### Pandas를 통한 시각화


```python
# Pandas plot 기능 활용하여 기본 그래프(line)를 그립니다.
# Pandas plot으로 그릴 때 x축에 인덱스 값이 y축에는 컬럼에 있는 값이 들어갑니다.
# 컬럼이 여러개라면 다른 색상으로 그려집니다.
market_year.T.plot(figsize=(12,4))
```




    <AxesSubplot:xlabel='ListingYear'>




    
![png](output_89_1.png)
    



```python
# 컬럼값을 subplots 으로 그립니다.
market_year.T.plot(figsize=(12,4), subplots=True)
# 과학적 기수법으로 그려짐
```




    array([<AxesSubplot:xlabel='ListingYear'>,
           <AxesSubplot:xlabel='ListingYear'>,
           <AxesSubplot:xlabel='ListingYear'>], dtype=object)




    
![png](output_90_1.png)
    



```python
# Pandas plot 기능 활용하여 막대 그래프(bar, barh)를 그립니다.
market_year.T.plot.bar(figsize=(12,4), subplots=True)
```




    array([<AxesSubplot:title={'center':'KONEX'}, xlabel='ListingYear'>,
           <AxesSubplot:title={'center':'KOSDAQ'}, xlabel='ListingYear'>,
           <AxesSubplot:title={'center':'KOSPI'}, xlabel='ListingYear'>],
          dtype=object)




    
![png](output_91_1.png)
    



```python
market_year.T.plot.barh(figsize=(12,20), subplots=True)
```




    array([<AxesSubplot:title={'center':'KONEX'}, ylabel='ListingYear'>,
           <AxesSubplot:title={'center':'KOSDAQ'}, ylabel='ListingYear'>,
           <AxesSubplot:title={'center':'KOSPI'}, ylabel='ListingYear'>],
          dtype=object)




    
![png](output_92_1.png)
    



```python
# 컬럼명의 데이터 타입을 int 형태로 변경합니다.
# market_year.columns

```


```python
# 막대(bar)그래프 그리기
# market_year

```

### groupby 와 pivot_table로 빈도수 구하기
<img src="https://pandas.pydata.org/pandas-docs/stable/_images/06_valuecounts.svg">

* [How to calculate summary statistics? — pandas documentation](https://pandas.pydata.org/pandas-docs/stable/getting_started/intro_tutorials/06_calculate_statistics.html)
* [Group by: split-apply-combine — pandas documentation](https://pandas.pydata.org/pandas-docs/stable/user_guide/groupby.html)
* [pandas.pivot_table — pandas 1.2.0 documentation](https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.pivot_table.html)


```python
# groupby([인덱스 컬럼 리스트])[연산에 사용할 컬럼].연산()
market_year = df.groupby(['Market','ListingYear'])['Symbol'].count()
market_year.head(2)
```




    Market  ListingYear
    KONEX   2013.0         12
            2014.0         13
    Name: Symbol, dtype: int64




```python
type(np.nan)
```




    float




```python
df_market_year = market_year.unstack().fillna(0).astype(int)
df_market_year
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th>ListingYear</th>
      <th>1956.0</th>
      <th>1962.0</th>
      <th>1964.0</th>
      <th>1966.0</th>
      <th>1968.0</th>
      <th>1969.0</th>
      <th>1970.0</th>
      <th>1971.0</th>
      <th>1972.0</th>
      <th>1973.0</th>
      <th>...</th>
      <th>2012.0</th>
      <th>2013.0</th>
      <th>2014.0</th>
      <th>2015.0</th>
      <th>2016.0</th>
      <th>2017.0</th>
      <th>2018.0</th>
      <th>2019.0</th>
      <th>2020.0</th>
      <th>2021.0</th>
    </tr>
    <tr>
      <th>Market</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>KONEX</th>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>...</td>
      <td>0</td>
      <td>12</td>
      <td>13</td>
      <td>26</td>
      <td>25</td>
      <td>18</td>
      <td>14</td>
      <td>15</td>
      <td>12</td>
      <td>2</td>
    </tr>
    <tr>
      <th>KOSDAQ</th>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>...</td>
      <td>19</td>
      <td>35</td>
      <td>59</td>
      <td>90</td>
      <td>63</td>
      <td>68</td>
      <td>87</td>
      <td>97</td>
      <td>86</td>
      <td>50</td>
    </tr>
    <tr>
      <th>KOSPI</th>
      <td>5</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>6</td>
      <td>5</td>
      <td>4</td>
      <td>1</td>
      <td>3</td>
      <td>22</td>
      <td>...</td>
      <td>14</td>
      <td>11</td>
      <td>9</td>
      <td>18</td>
      <td>18</td>
      <td>20</td>
      <td>19</td>
      <td>15</td>
      <td>14</td>
      <td>11</td>
    </tr>
  </tbody>
</table>
<p>3 rows × 57 columns</p>
</div>




```python
# pivot_table로 같은 결과가 나오게 연산하기
pd.pivot_table(data=df, index='Market',
               columns='ListingYear',
               values='Symbol', aggfunc='count', fill_value=0)
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th>ListingYear</th>
      <th>1956.0</th>
      <th>1962.0</th>
      <th>1964.0</th>
      <th>1966.0</th>
      <th>1968.0</th>
      <th>1969.0</th>
      <th>1970.0</th>
      <th>1971.0</th>
      <th>1972.0</th>
      <th>1973.0</th>
      <th>...</th>
      <th>2012.0</th>
      <th>2013.0</th>
      <th>2014.0</th>
      <th>2015.0</th>
      <th>2016.0</th>
      <th>2017.0</th>
      <th>2018.0</th>
      <th>2019.0</th>
      <th>2020.0</th>
      <th>2021.0</th>
    </tr>
    <tr>
      <th>Market</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>KONEX</th>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>...</td>
      <td>0</td>
      <td>12</td>
      <td>13</td>
      <td>26</td>
      <td>25</td>
      <td>18</td>
      <td>14</td>
      <td>15</td>
      <td>12</td>
      <td>2</td>
    </tr>
    <tr>
      <th>KOSDAQ</th>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>...</td>
      <td>19</td>
      <td>35</td>
      <td>59</td>
      <td>90</td>
      <td>63</td>
      <td>68</td>
      <td>87</td>
      <td>97</td>
      <td>86</td>
      <td>50</td>
    </tr>
    <tr>
      <th>KOSPI</th>
      <td>5</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>6</td>
      <td>5</td>
      <td>4</td>
      <td>1</td>
      <td>3</td>
      <td>22</td>
      <td>...</td>
      <td>14</td>
      <td>11</td>
      <td>9</td>
      <td>18</td>
      <td>18</td>
      <td>20</td>
      <td>19</td>
      <td>15</td>
      <td>14</td>
      <td>11</td>
    </tr>
  </tbody>
</table>
<p>3 rows × 57 columns</p>
</div>




```python
df_my = market_year.reset_index()
df_my = df_my.rename(columns={'Symbol':'count'})
df_my.head()
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Market</th>
      <th>ListingYear</th>
      <th>count</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>KONEX</td>
      <td>2013.0</td>
      <td>12</td>
    </tr>
    <tr>
      <th>1</th>
      <td>KONEX</td>
      <td>2014.0</td>
      <td>13</td>
    </tr>
    <tr>
      <th>2</th>
      <td>KONEX</td>
      <td>2015.0</td>
      <td>26</td>
    </tr>
    <tr>
      <th>3</th>
      <td>KONEX</td>
      <td>2016.0</td>
      <td>25</td>
    </tr>
    <tr>
      <th>4</th>
      <td>KONEX</td>
      <td>2017.0</td>
      <td>18</td>
    </tr>
  </tbody>
</table>
</div>




```python
# 위의 groupby 결과를 scatterplot으로 그립니다.
# df_market_year
plt.figure(figsize=(12,3))
sns.scatterplot(data=df_my, x='ListingYear', y='count', hue='Market')
```




    <AxesSubplot:xlabel='ListingYear', ylabel='count'>




    
![png](output_101_1.png)
    



```python
# lineplot 그리기
plt.figure(figsize=(12,3))
sns.lineplot(data=df_my, x='ListingYear', y='count', hue='Market')
```




    <AxesSubplot:xlabel='ListingYear', ylabel='count'>




    
![png](output_102_1.png)
    



```python
# relplot으로 subplot 그리기 - scatter
sns.relplot(data=df_my, x='ListingYear', y='count',
            hue='Market', height=2, aspect=3, # 크기조정. figsize는 안먹힘
            col='Market')
```




    <seaborn.axisgrid.FacetGrid at 0x24f8590e880>




    
![png](output_103_1.png)
    



```python
# relplot으로 subplot 그리기 - line
sns.relplot(data=df_my, x='ListingYear', y='count',
            hue='Market', height=2, aspect=3,
            col='Market', kind='line')
```




    <seaborn.axisgrid.FacetGrid at 0x24f860c4f10>




    
![png](output_104_1.png)
    


### 구간화 binnig 과 히스토그램
* 연속된 수치 데이터를 범주형 데이터로 표현, bucketing 이라고 부르기도 함
* 히스토그램 : 도수분포를 그래프 형태로 표현한 것
* 막대그래프와 비슷해 보이지만 다른 그래프
* 참고 : [히스토그램 - 위키백과, 우리 모두의 백과사전](https://ko.wikipedia.org/wiki/%ED%9E%88%EC%8A%A4%ED%86%A0%EA%B7%B8%EB%9E%A8)


```python
df.describe()
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>ListingYear</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>count</th>
      <td>2450.000000</td>
    </tr>
    <tr>
      <th>mean</th>
      <td>2005.171837</td>
    </tr>
    <tr>
      <th>std</th>
      <td>12.735854</td>
    </tr>
    <tr>
      <th>min</th>
      <td>1956.000000</td>
    </tr>
    <tr>
      <th>25%</th>
      <td>1999.000000</td>
    </tr>
    <tr>
      <th>50%</th>
      <td>2007.000000</td>
    </tr>
    <tr>
      <th>75%</th>
      <td>2016.000000</td>
    </tr>
    <tr>
      <th>max</th>
      <td>2021.000000</td>
    </tr>
  </tbody>
</table>
</div>




```python
sns.countplot(data=df, x='ListingYear')
```




    <AxesSubplot:xlabel='ListingYear', ylabel='count'>




    
![png](output_107_1.png)
    



```python
# bins 의 갯수에 따라 그래프의 표현 방법이 달라집니다.
df['ListingYear'].hist(bins=10)
```




    <AxesSubplot:>




    
![png](output_108_1.png)
    



```python

```

## 데이터 색인


```python
df
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Symbol</th>
      <th>Market</th>
      <th>Name</th>
      <th>Sector</th>
      <th>Industry</th>
      <th>ListingDate</th>
      <th>SettleMonth</th>
      <th>Representative</th>
      <th>HomePage</th>
      <th>Region</th>
      <th>ListingYear</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>060310</td>
      <td>KOSDAQ</td>
      <td>3S</td>
      <td>특수 목적용 기계 제조업</td>
      <td>반도체 웨이퍼 캐리어</td>
      <td>2002-04-23</td>
      <td>03월</td>
      <td>박종익, 김세완 (각자 대표이사)</td>
      <td>http://www.3sref.com</td>
      <td>서울특별시</td>
      <td>2002.0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>095570</td>
      <td>KOSPI</td>
      <td>AJ네트웍스</td>
      <td>산업용 기계 및 장비 임대업</td>
      <td>렌탈(파렛트, OA장비, 건설장비)</td>
      <td>2015-08-21</td>
      <td>12월</td>
      <td>박대현</td>
      <td>http://www.ajnet.co.kr</td>
      <td>서울특별시</td>
      <td>2015.0</td>
    </tr>
    <tr>
      <th>2</th>
      <td>006840</td>
      <td>KOSPI</td>
      <td>AK홀딩스</td>
      <td>기타 금융업</td>
      <td>지주사업</td>
      <td>1999-08-11</td>
      <td>12월</td>
      <td>채형석, 이석주(각자 대표이사)</td>
      <td>http://www.aekyunggroup.co.kr</td>
      <td>서울특별시</td>
      <td>1999.0</td>
    </tr>
    <tr>
      <th>3</th>
      <td>054620</td>
      <td>KOSDAQ</td>
      <td>APS홀딩스</td>
      <td>기타 금융업</td>
      <td>인터넷 트래픽 솔루션</td>
      <td>2001-12-04</td>
      <td>12월</td>
      <td>정기로</td>
      <td>http://www.apsholdings.co.kr</td>
      <td>경기도</td>
      <td>2001.0</td>
    </tr>
    <tr>
      <th>4</th>
      <td>265520</td>
      <td>KOSDAQ</td>
      <td>AP시스템</td>
      <td>특수 목적용 기계 제조업</td>
      <td>디스플레이 제조 장비</td>
      <td>2017-04-07</td>
      <td>12월</td>
      <td>김영주</td>
      <td>http://www.apsystems.co.kr</td>
      <td>경기도</td>
      <td>2017.0</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>7135</th>
      <td>000547</td>
      <td>KOSPI</td>
      <td>흥국화재2우B</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaT</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>7136</th>
      <td>000545</td>
      <td>KOSPI</td>
      <td>흥국화재우</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaT</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>7137</th>
      <td>003280</td>
      <td>KOSPI</td>
      <td>흥아해운</td>
      <td>해상 운송업</td>
      <td>외항화물운송업(케미컬탱커)</td>
      <td>1976-06-29</td>
      <td>12월</td>
      <td>이환구</td>
      <td>http://www.heung-a.com</td>
      <td>서울특별시</td>
      <td>1976.0</td>
    </tr>
    <tr>
      <th>7138</th>
      <td>037440</td>
      <td>KOSDAQ</td>
      <td>희림</td>
      <td>건축기술, 엔지니어링 및 관련 기술 서비스업</td>
      <td>설계 및 감리용역</td>
      <td>2000-02-03</td>
      <td>12월</td>
      <td>정영균, 이목운, 허철호 (각자대표)</td>
      <td>http://www.heerim.com</td>
      <td>서울특별시</td>
      <td>2000.0</td>
    </tr>
    <tr>
      <th>7139</th>
      <td>238490</td>
      <td>KOSDAQ</td>
      <td>힘스</td>
      <td>특수 목적용 기계 제조업</td>
      <td>OLED Mask 인장기, OLED Mask 검사기 등</td>
      <td>2017-07-20</td>
      <td>12월</td>
      <td>김주환</td>
      <td>http://www.hims.co.kr</td>
      <td>인천광역시</td>
      <td>2017.0</td>
    </tr>
  </tbody>
</table>
<p>7140 rows × 11 columns</p>
</div>




```python
# 케이맨 제도에 있는 회사 찾기
df['Region'].unique()
```




    array(['서울특별시', '경기도', nan, '부산광역시', '인천광역시', '경상북도', '대구광역시', '전라남도',
           '충청남도', '홍콩', '경상남도', '전라북도', '일본', '울산광역시', '대전광역시', '충청북도',
           '강원도', '케이맨 제도', '광주광역시', '세종특별자치시', '미국', '제주특별자치도', '싱가포르'],
          dtype=object)




```python
df[df['Region'] == '케이맨 제도']
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Symbol</th>
      <th>Market</th>
      <th>Name</th>
      <th>Sector</th>
      <th>Industry</th>
      <th>ListingDate</th>
      <th>SettleMonth</th>
      <th>Representative</th>
      <th>HomePage</th>
      <th>Region</th>
      <th>ListingYear</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2109</th>
      <td>900280</td>
      <td>KOSDAQ</td>
      <td>골든센츄리</td>
      <td>기타 금융업</td>
      <td>트랙터용 휠 및 타이어</td>
      <td>2016-10-19</td>
      <td>12월</td>
      <td>주승화</td>
      <td>http://www.jsj-wheel.co.kr</td>
      <td>케이맨 제도</td>
      <td>2016.0</td>
    </tr>
    <tr>
      <th>2142</th>
      <td>900070</td>
      <td>KOSDAQ</td>
      <td>글로벌에스엠</td>
      <td>기타 금융업</td>
      <td>자회사 제품 : IT기기용 정밀 화스너부품(스크류, 샤프트, 스프링)</td>
      <td>2009-12-23</td>
      <td>12월</td>
      <td>나윤복</td>
      <td>http://www.globalsmtech.com</td>
      <td>케이맨 제도</td>
      <td>2009.0</td>
    </tr>
    <tr>
      <th>4081</th>
      <td>900120</td>
      <td>KOSDAQ</td>
      <td>씨케이에이치</td>
      <td>기타 금융업</td>
      <td>건강보조식품</td>
      <td>2010-03-31</td>
      <td>06월</td>
      <td>린진성</td>
      <td>NaN</td>
      <td>케이맨 제도</td>
      <td>2010.0</td>
    </tr>
    <tr>
      <th>4340</th>
      <td>900140</td>
      <td>KOSPI</td>
      <td>엘브이엠씨홀딩스</td>
      <td>자동차 판매업</td>
      <td>지주회사</td>
      <td>2010-11-30</td>
      <td>12월</td>
      <td>오세영, 노성석, 김선발 (각자 대표이사)</td>
      <td>http://www.lvmcholdings.net</td>
      <td>케이맨 제도</td>
      <td>2010.0</td>
    </tr>
    <tr>
      <th>4995</th>
      <td>900250</td>
      <td>KOSDAQ</td>
      <td>크리스탈신소재</td>
      <td>기타 금융업</td>
      <td>합성운모 플레이크, 파우더, 테이프</td>
      <td>2016-01-28</td>
      <td>12월</td>
      <td>다이중치우 (DAI ZHONG QIU)</td>
      <td>http://www.crystalnewmaterial.com</td>
      <td>케이맨 제도</td>
      <td>2016.0</td>
    </tr>
  </tbody>
</table>
</div>




```python
# 1970년 이전에 상장한 기업을 찾습니다.
df[df['ListingYear'] < 1970]
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Symbol</th>
      <th>Market</th>
      <th>Name</th>
      <th>Sector</th>
      <th>Industry</th>
      <th>ListingDate</th>
      <th>SettleMonth</th>
      <th>Representative</th>
      <th>HomePage</th>
      <th>Region</th>
      <th>ListingYear</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>56</th>
      <td>000120</td>
      <td>KOSPI</td>
      <td>CJ대한통운</td>
      <td>도로 화물 운송업</td>
      <td>Contract Logistics, 포워딩, 항만하역, 해운, 택배국제특송, SCM...</td>
      <td>1956-07-02</td>
      <td>12월</td>
      <td>강신호</td>
      <td>http://www.cjlogistics.com</td>
      <td>서울특별시</td>
      <td>1956.0</td>
    </tr>
    <tr>
      <th>78</th>
      <td>001530</td>
      <td>KOSPI</td>
      <td>DI동일</td>
      <td>상품 중개업</td>
      <td>면사,화섬사,면포,혼방포,스포츠웨어용 신합섬 제조,도매,수출</td>
      <td>1964-01-04</td>
      <td>12월</td>
      <td>서태원, 손재선</td>
      <td>http://www.dong-il.com</td>
      <td>서울특별시</td>
      <td>1964.0</td>
    </tr>
    <tr>
      <th>1805</th>
      <td>004250</td>
      <td>KOSPI</td>
      <td>NPC</td>
      <td>플라스틱제품 제조업</td>
      <td>산업용기프라스틱제품(플라스틱 파렛트,시트 파렛트) 제조,판매</td>
      <td>1969-09-08</td>
      <td>12월</td>
      <td>최병민</td>
      <td>http://www.npc.co.kr</td>
      <td>경기도</td>
      <td>1969.0</td>
    </tr>
    <tr>
      <th>2091</th>
      <td>000050</td>
      <td>KOSPI</td>
      <td>경방</td>
      <td>종합 소매업</td>
      <td>섬유류(면사,면혼방사,면직물,면혼방직물,화섬사,화섬직물) 제조,도매,수출입</td>
      <td>1956-03-03</td>
      <td>12월</td>
      <td>김준, 김담</td>
      <td>http://www.kyungbang.co.kr</td>
      <td>서울특별시</td>
      <td>1956.0</td>
    </tr>
    <tr>
      <th>2367</th>
      <td>001440</td>
      <td>KOSPI</td>
      <td>대한전선</td>
      <td>절연선 및 케이블 제조업</td>
      <td>전력선,통신케이블,적산계기,스텐레스압연제품,광케이블,초고압선,알루미늄 제조,도매/전기공사</td>
      <td>1968-12-27</td>
      <td>12월</td>
      <td>나형균</td>
      <td>http://www.taihan.com</td>
      <td>경기도</td>
      <td>1968.0</td>
    </tr>
    <tr>
      <th>2369</th>
      <td>001790</td>
      <td>KOSPI</td>
      <td>대한제당</td>
      <td>곡물가공품, 전분 및 전분제품 제조업</td>
      <td>제당,가축용 배합사료,설탕,기능성감미료(자일로올리고당),외식산 제조,도소매/부동산 임대</td>
      <td>1968-12-27</td>
      <td>12월</td>
      <td>김기영</td>
      <td>http://www.ts.co.kr</td>
      <td>인천광역시</td>
      <td>1968.0</td>
    </tr>
    <tr>
      <th>2372</th>
      <td>003490</td>
      <td>KOSPI</td>
      <td>대한항공</td>
      <td>항공 여객 운송업</td>
      <td>여객운송,화물운송,항공기 제조,판매,정비수리/기내식 제조판매,면세품 판매</td>
      <td>1966-03-18</td>
      <td>12월</td>
      <td>조원태, 우기홍</td>
      <td>http://www.koreanair.com</td>
      <td>서울특별시</td>
      <td>1966.0</td>
    </tr>
    <tr>
      <th>2631</th>
      <td>000060</td>
      <td>KOSPI</td>
      <td>메리츠화재</td>
      <td>보험업</td>
      <td>손해보험(화재,해상,운송보험)</td>
      <td>1956-07-02</td>
      <td>12월</td>
      <td>김용범</td>
      <td>http://www.meritzfire.com</td>
      <td>서울특별시</td>
      <td>1956.0</td>
    </tr>
    <tr>
      <th>3737</th>
      <td>000070</td>
      <td>KOSPI</td>
      <td>삼양홀딩스</td>
      <td>기타 금융업</td>
      <td>지주회사,경영자문컨설팅</td>
      <td>1968-12-27</td>
      <td>12월</td>
      <td>엄태웅, 윤재엽</td>
      <td>http://www.samyang.com</td>
      <td>서울특별시</td>
      <td>1968.0</td>
    </tr>
    <tr>
      <th>3838</th>
      <td>002420</td>
      <td>KOSPI</td>
      <td>세기상사</td>
      <td>영화, 비디오물, 방송프로그램 제작 및 배급업</td>
      <td>극장(영화상영)/극영화,만화영화 제조/음식료품,일용잡화 소매/부동산 임대</td>
      <td>1968-12-27</td>
      <td>12월</td>
      <td>조영준</td>
      <td>http://daehancinema.com</td>
      <td>서울특별시</td>
      <td>1968.0</td>
    </tr>
    <tr>
      <th>3847</th>
      <td>003030</td>
      <td>KOSPI</td>
      <td>세아제강지주</td>
      <td>기타 금융업</td>
      <td>경영컨설팅업</td>
      <td>1969-05-13</td>
      <td>12월</td>
      <td>이순형, 김태현</td>
      <td>http://www.seahsteel.co.kr/company/holdings/</td>
      <td>서울특별시</td>
      <td>1969.0</td>
    </tr>
    <tr>
      <th>4533</th>
      <td>000700</td>
      <td>KOSPI</td>
      <td>유수홀딩스</td>
      <td>회사 본부 및 경영 컨설팅 서비스업</td>
      <td>지주사업</td>
      <td>1956-03-03</td>
      <td>12월</td>
      <td>송영규</td>
      <td>http://www.eusu-holdings.com</td>
      <td>서울특별시</td>
      <td>1956.0</td>
    </tr>
    <tr>
      <th>4564</th>
      <td>000100</td>
      <td>KOSPI</td>
      <td>유한양행</td>
      <td>의약품 제조업</td>
      <td>의약품(삐콤씨,알마겔,세파졸린주사,아코텍스주사,이세파신,신생아호흡곤란치료제 등),생...</td>
      <td>1962-11-01</td>
      <td>12월</td>
      <td>대표이사 조욱제</td>
      <td>http://www.yuhan.co.kr</td>
      <td>서울특별시</td>
      <td>1962.0</td>
    </tr>
    <tr>
      <th>4730</th>
      <td>000950</td>
      <td>KOSPI</td>
      <td>전방</td>
      <td>방적 및 가공사 제조업</td>
      <td>면사,면혼방사,마혼방사,화섬사,염색사,자수사,소모사,면직물,면혼방직물,화섬직물,특수...</td>
      <td>1968-10-21</td>
      <td>12월</td>
      <td>조규옥, 김형건</td>
      <td>http://www.chonbang.co.kr</td>
      <td>서울특별시</td>
      <td>1968.0</td>
    </tr>
    <tr>
      <th>4930</th>
      <td>003690</td>
      <td>KOSPI</td>
      <td>코리안리</td>
      <td>재 보험업</td>
      <td>금융보험/부동산 임대</td>
      <td>1969-12-22</td>
      <td>12월</td>
      <td>원종규</td>
      <td>http://www.koreanre.co.kr</td>
      <td>서울특별시</td>
      <td>1969.0</td>
    </tr>
    <tr>
      <th>6905</th>
      <td>000240</td>
      <td>KOSPI</td>
      <td>한국앤컴퍼니</td>
      <td>기타 금융업</td>
      <td>비금융지주회사</td>
      <td>1968-12-27</td>
      <td>12월</td>
      <td>조현범</td>
      <td>http://www.hankook-technologygroup.com</td>
      <td>경기도</td>
      <td>1968.0</td>
    </tr>
    <tr>
      <th>6920</th>
      <td>000970</td>
      <td>KOSPI</td>
      <td>한국주철관</td>
      <td>1차 철강 제조업</td>
      <td>수도용주철관,강관 제조</td>
      <td>1969-12-12</td>
      <td>12월</td>
      <td>홍동국, 김태형, 김형규, 김길출 (각자대표제)</td>
      <td>http://www.kcip.co.kr</td>
      <td>부산광역시</td>
      <td>1969.0</td>
    </tr>
    <tr>
      <th>6989</th>
      <td>003300</td>
      <td>KOSPI</td>
      <td>한일홀딩스</td>
      <td>시멘트, 석회, 플라스터 및 그 제품 제조업</td>
      <td>지주사업</td>
      <td>1969-11-20</td>
      <td>12월</td>
      <td>허기호, 전근식(각자대표)</td>
      <td>http://www.hanil.com</td>
      <td>서울특별시</td>
      <td>1969.0</td>
    </tr>
    <tr>
      <th>6997</th>
      <td>003480</td>
      <td>KOSPI</td>
      <td>한진중공업홀딩스</td>
      <td>연료용 가스 제조 및 배관공급업</td>
      <td>지주회사</td>
      <td>1956-03-03</td>
      <td>12월</td>
      <td>조남호, 조원국</td>
      <td>http://www.hhic-holdings.com</td>
      <td>경기도</td>
      <td>1956.0</td>
    </tr>
  </tbody>
</table>
</div>




```python
# and => &
# or  => |
True and True
```


```python
# 2020년 상장한 서울특별시에 소재한 코스피 종목을 찾습니다.
df.loc[(df['Region'] == "서울특별시")  & (df['Market'] == 'KOSPI') & (df['ListingYear'] == 2020)] 
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Symbol</th>
      <th>Market</th>
      <th>Name</th>
      <th>Sector</th>
      <th>Industry</th>
      <th>ListingDate</th>
      <th>SettleMonth</th>
      <th>Representative</th>
      <th>HomePage</th>
      <th>Region</th>
      <th>ListingYear</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>94</th>
      <td>365550</td>
      <td>KOSPI</td>
      <td>ESR켄달스퀘어리츠</td>
      <td>부동산 임대 및 공급업</td>
      <td>부동산투자</td>
      <td>2020-12-23</td>
      <td>05월</td>
      <td>박래익</td>
      <td>http://www.esrks-reit.com</td>
      <td>서울특별시</td>
      <td>2020.0</td>
    </tr>
    <tr>
      <th>1264</th>
      <td>344820</td>
      <td>KOSPI</td>
      <td>KCC글라스</td>
      <td>유리 및 유리제품 제조업</td>
      <td>판유리 등</td>
      <td>2020-01-21</td>
      <td>12월</td>
      <td>김내환</td>
      <td>http://www.kccglass.co.kr</td>
      <td>서울특별시</td>
      <td>2020.0</td>
    </tr>
    <tr>
      <th>3542</th>
      <td>357250</td>
      <td>KOSPI</td>
      <td>미래에셋맵스리츠</td>
      <td>부동산 임대 및 공급업</td>
      <td>부동산 임대업</td>
      <td>2020-08-05</td>
      <td>11월</td>
      <td>김호식</td>
      <td>http://www.maps1reit.miraeasset.com</td>
      <td>서울특별시</td>
      <td>2020.0</td>
    </tr>
    <tr>
      <th>4287</th>
      <td>244920</td>
      <td>KOSPI</td>
      <td>에이플러스에셋</td>
      <td>보험 및 연금관련 서비스업</td>
      <td>보험대리 및 중개업</td>
      <td>2020-11-20</td>
      <td>12월</td>
      <td>곽근호, 서성식, 조규남</td>
      <td>NaN</td>
      <td>서울특별시</td>
      <td>2020.0</td>
    </tr>
    <tr>
      <th>4642</th>
      <td>350520</td>
      <td>KOSPI</td>
      <td>이지스레지던스리츠</td>
      <td>부동산 임대 및 공급업</td>
      <td>부동산투자, 취득, 매매, 임대</td>
      <td>2020-08-05</td>
      <td>06월</td>
      <td>박영희</td>
      <td>http://igisresidencereit.com/</td>
      <td>서울특별시</td>
      <td>2020.0</td>
    </tr>
    <tr>
      <th>4647</th>
      <td>334890</td>
      <td>KOSPI</td>
      <td>이지스밸류리츠</td>
      <td>부동산 임대 및 공급업</td>
      <td>부동산투자, 취득, 매매, 임대</td>
      <td>2020-07-16</td>
      <td>08월</td>
      <td>도병운</td>
      <td>http://www.igisvaluereit.com</td>
      <td>서울특별시</td>
      <td>2020.0</td>
    </tr>
    <tr>
      <th>4755</th>
      <td>348950</td>
      <td>KOSPI</td>
      <td>제이알글로벌리츠</td>
      <td>부동산 임대 및 공급업</td>
      <td>벨기에 파이낸스 타워</td>
      <td>2020-08-07</td>
      <td>06월</td>
      <td>오남수</td>
      <td>http://jrglobalreit.com</td>
      <td>서울특별시</td>
      <td>2020.0</td>
    </tr>
    <tr>
      <th>4920</th>
      <td>357120</td>
      <td>KOSPI</td>
      <td>코람코에너지리츠</td>
      <td>부동산 임대 및 공급업</td>
      <td>부동산 투자 및 관리</td>
      <td>2020-08-31</td>
      <td>11월</td>
      <td>이성균</td>
      <td>http://www.koramcoenergyplus.co.kr</td>
      <td>서울특별시</td>
      <td>2020.0</td>
    </tr>
    <tr>
      <th>5073</th>
      <td>363280</td>
      <td>KOSPI</td>
      <td>티와이홀딩스</td>
      <td>기타 금융업</td>
      <td>지주사업</td>
      <td>2020-09-22</td>
      <td>12월</td>
      <td>유종연</td>
      <td>http://www.ty-holdings.co.kr</td>
      <td>서울특별시</td>
      <td>2020.0</td>
    </tr>
    <tr>
      <th>5225</th>
      <td>352820</td>
      <td>KOSPI</td>
      <td>하이브</td>
      <td>오디오물 출판 및 원판 녹음업</td>
      <td>음악 기획/제작, 퍼블리싱, 아티스트 매니지먼트</td>
      <td>2020-10-15</td>
      <td>12월</td>
      <td>박지원</td>
      <td>http://www.bighitcorp.com</td>
      <td>서울특별시</td>
      <td>2020.0</td>
    </tr>
  </tbody>
</table>
</div>




```python
pd.options.display.max_columns = None
```

### 지역별 섹터


```python
# Sector, Region 으로 crosstab 연산을 합니다.
df_sr = pd.crosstab(df['Sector'], df['Region'])
df_sr
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th>Region</th>
      <th>강원도</th>
      <th>경기도</th>
      <th>경상남도</th>
      <th>경상북도</th>
      <th>광주광역시</th>
      <th>대구광역시</th>
      <th>대전광역시</th>
      <th>미국</th>
      <th>부산광역시</th>
      <th>서울특별시</th>
      <th>세종특별자치시</th>
      <th>싱가포르</th>
      <th>울산광역시</th>
      <th>인천광역시</th>
      <th>일본</th>
      <th>전라남도</th>
      <th>전라북도</th>
      <th>제주특별자치도</th>
      <th>충청남도</th>
      <th>충청북도</th>
      <th>케이맨 제도</th>
      <th>홍콩</th>
    </tr>
    <tr>
      <th>Sector</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>1차 비철금속 제조업</th>
      <td>0</td>
      <td>7</td>
      <td>1</td>
      <td>1</td>
      <td>0</td>
      <td>3</td>
      <td>1</td>
      <td>0</td>
      <td>1</td>
      <td>3</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>1차 철강 제조업</th>
      <td>0</td>
      <td>4</td>
      <td>12</td>
      <td>7</td>
      <td>1</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>11</td>
      <td>11</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>4</td>
      <td>0</td>
      <td>1</td>
      <td>1</td>
      <td>0</td>
      <td>4</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>가구 제조업</th>
      <td>0</td>
      <td>4</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>3</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>가전제품 및 정보통신장비 소매업</th>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>가정용 기기 제조업</th>
      <td>0</td>
      <td>6</td>
      <td>1</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>해상 운송업</th>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>5</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>해체, 선별 및 원료 재생업</th>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>화학섬유 제조업</th>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>6</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>환경 정화 및 복원업</th>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>회사 본부 및 경영 컨설팅 서비스업</th>
      <td>0</td>
      <td>2</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>2</td>
      <td>7</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
  </tbody>
</table>
<p>160 rows × 22 columns</p>
</div>



### 컬럼과 인덱스 값으로 색인하기


```python
# 특정 컬럼만 가져오기
df_sr['경기도']
```




    Sector
    1차 비철금속 제조업            7
    1차 철강 제조업              4
    가구 제조업                 4
    가전제품 및 정보통신장비 소매업      0
    가정용 기기 제조업             6
                          ..
    해상 운송업                 0
    해체, 선별 및 원료 재생업        1
    화학섬유 제조업               1
    환경 정화 및 복원업            0
    회사 본부 및 경영 컨설팅 서비스업    2
    Name: 경기도, Length: 160, dtype: int64



### 특정 행만 가져오기

* .loc[행]
* .loc[행, 열]
* .loc[조건식, 열]


```python
# df_sr에서 "소프트웨어 개발 및 공급업" 행만 가져오기
df_sr.loc["소프트웨어 개발 및 공급업"].sort_values(ascending=False)
```




    Region
    서울특별시      95
    경기도        37
    충청북도        2
    일본          2
    홍콩          1
    경상남도        1
    대전광역시       1
    부산광역시       1
    경상북도        0
    광주광역시       0
    대구광역시       0
    미국          0
    세종특별자치시     0
    케이맨 제도      0
    싱가포르        0
    울산광역시       0
    인천광역시       0
    전라남도        0
    전라북도        0
    제주특별자치도     0
    충청남도        0
    강원도         0
    Name: 소프트웨어 개발 및 공급업, dtype: int64




```python
# loc 로 행인덱스 가져오기
# 행에서 "소프트웨어 개발 및 공급업", "금융 지원 서비스업", "의약품 제조업" 가져오기
df_sr.loc[["소프트웨어 개발 및 공급업", "금융 지원 서비스업", "의약품 제조업"]]
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th>Region</th>
      <th>강원도</th>
      <th>경기도</th>
      <th>경상남도</th>
      <th>경상북도</th>
      <th>광주광역시</th>
      <th>대구광역시</th>
      <th>대전광역시</th>
      <th>미국</th>
      <th>부산광역시</th>
      <th>서울특별시</th>
      <th>세종특별자치시</th>
      <th>싱가포르</th>
      <th>울산광역시</th>
      <th>인천광역시</th>
      <th>일본</th>
      <th>전라남도</th>
      <th>전라북도</th>
      <th>제주특별자치도</th>
      <th>충청남도</th>
      <th>충청북도</th>
      <th>케이맨 제도</th>
      <th>홍콩</th>
    </tr>
    <tr>
      <th>Sector</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>소프트웨어 개발 및 공급업</th>
      <td>0</td>
      <td>37</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>1</td>
      <td>95</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>2</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>2</td>
      <td>0</td>
      <td>1</td>
    </tr>
    <tr>
      <th>금융 지원 서비스업</th>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>75</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>의약품 제조업</th>
      <td>5</td>
      <td>34</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>2</td>
      <td>0</td>
      <td>1</td>
      <td>39</td>
      <td>2</td>
      <td>0</td>
      <td>0</td>
      <td>2</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>2</td>
      <td>6</td>
      <td>0</td>
      <td>0</td>
    </tr>
  </tbody>
</table>
</div>




```python
# loc 로 행, 컬럼 가져오기
# 행에서 "소프트웨어 개발 및 공급업", "금융 지원 서비스업", "의약품 제조업"
# 열에서 "서울특별시" 가져오기
df_sr.loc[["소프트웨어 개발 및 공급업", "금융 지원 서비스업", "의약품 제조업"],"서울특별시"]
```




    Sector
    소프트웨어 개발 및 공급업    95
    금융 지원 서비스업        75
    의약품 제조업           39
    Name: 서울특별시, dtype: int64




```python
# loc로 여러 행과 열 가져오기
df_sr.loc[["소프트웨어 개발 및 공급업", "금융 지원 서비스업", "의약품 제조업"],
          ["서울특별시","경기도","인천광역시"]]
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th>Region</th>
      <th>서울특별시</th>
      <th>경기도</th>
      <th>인천광역시</th>
    </tr>
    <tr>
      <th>Sector</th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>소프트웨어 개발 및 공급업</th>
      <td>95</td>
      <td>37</td>
      <td>0</td>
    </tr>
    <tr>
      <th>금융 지원 서비스업</th>
      <td>75</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>의약품 제조업</th>
      <td>39</td>
      <td>34</td>
      <td>2</td>
    </tr>
  </tbody>
</table>
</div>




```python
df.plot??
```


```python
# "소프트웨어 개발 및 공급업" 만 가져와서 막대그래프를 그립니다.
df_sr.loc["소프트웨어 개발 및 공급업"].sort_values(ascending=False).head(10).plot.barh(figsize=(12,3))
```




    <AxesSubplot:ylabel='Region'>




    
![png](output_128_1.png)
    



```python
# "의약품 제조업" 만 가져와서 막대그래프를 그립니다.

df_sr.loc["의약품 제조업"].sort_values().tail(10).plot.barh(figsize=(12,3))
```




    <AxesSubplot:ylabel='Region'>




    
![png](output_129_1.png)
    



```python
# iloc[행]
# iloc[행,열]
df_sr.iloc[:2, :3]
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th>Region</th>
      <th>강원도</th>
      <th>경기도</th>
      <th>경상남도</th>
    </tr>
    <tr>
      <th>Sector</th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>1차 비철금속 제조업</th>
      <td>0</td>
      <td>7</td>
      <td>1</td>
    </tr>
    <tr>
      <th>1차 철강 제조업</th>
      <td>0</td>
      <td>4</td>
      <td>12</td>
    </tr>
  </tbody>
</table>
</div>




```python
# 행은 5-10, 열 10-15
df_sr.iloc[5:11, 10:16]
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th>Region</th>
      <th>세종특별자치시</th>
      <th>싱가포르</th>
      <th>울산광역시</th>
      <th>인천광역시</th>
      <th>일본</th>
      <th>전라남도</th>
    </tr>
    <tr>
      <th>Sector</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>가죽, 가방 및 유사제품 제조업</th>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>개인 및 가정용품 임대업</th>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>건물 건설업</th>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>2</td>
    </tr>
    <tr>
      <th>건물설비 설치 공사업</th>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>건축기술, 엔지니어링 및 관련 기술 서비스업</th>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>건축자재, 철물 및 난방장치 도매업</th>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
  </tbody>
</table>
</div>




```python

```


```python
# df.head 혹은 tail도 내부에서 iloc를 슬라이싱으로 사용하고 있습니다.
# df.head??
```


```python

```


```python
# df_sr.tail??
```


```python
import FinanceDataReader as fdr
df_sp = fdr.StockListing('S&P500')
df_sp
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Symbol</th>
      <th>Name</th>
      <th>Sector</th>
      <th>Industry</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>MMM</td>
      <td>3M</td>
      <td>Industrials</td>
      <td>Industrial Conglomerates</td>
    </tr>
    <tr>
      <th>1</th>
      <td>ABT</td>
      <td>Abbott Laboratories</td>
      <td>Health Care</td>
      <td>Health Care Equipment</td>
    </tr>
    <tr>
      <th>2</th>
      <td>ABBV</td>
      <td>AbbVie</td>
      <td>Health Care</td>
      <td>Pharmaceuticals</td>
    </tr>
    <tr>
      <th>3</th>
      <td>ABMD</td>
      <td>Abiomed</td>
      <td>Health Care</td>
      <td>Health Care Equipment</td>
    </tr>
    <tr>
      <th>4</th>
      <td>ACN</td>
      <td>Accenture</td>
      <td>Information Technology</td>
      <td>IT Consulting &amp; Other Services</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>500</th>
      <td>YUM</td>
      <td>Yum! Brands</td>
      <td>Consumer Discretionary</td>
      <td>Restaurants</td>
    </tr>
    <tr>
      <th>501</th>
      <td>ZBRA</td>
      <td>Zebra Technologies</td>
      <td>Information Technology</td>
      <td>Electronic Equipment &amp; Instruments</td>
    </tr>
    <tr>
      <th>502</th>
      <td>ZBH</td>
      <td>Zimmer Biomet</td>
      <td>Health Care</td>
      <td>Health Care Equipment</td>
    </tr>
    <tr>
      <th>503</th>
      <td>ZION</td>
      <td>Zions Bancorp</td>
      <td>Financials</td>
      <td>Regional Banks</td>
    </tr>
    <tr>
      <th>504</th>
      <td>ZTS</td>
      <td>Zoetis</td>
      <td>Health Care</td>
      <td>Pharmaceuticals</td>
    </tr>
  </tbody>
</table>
<p>505 rows × 4 columns</p>
</div>




```python

```


```python

```


```python

```
